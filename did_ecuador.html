<!DOCTYPE html>
<html lang="en"><head>
<script src="did_ecuador_files/libs/clipboard/clipboard.min.js"></script>
<script src="did_ecuador_files/libs/quarto-html/tabby.min.js"></script>
<script src="did_ecuador_files/libs/quarto-html/popper.min.js"></script>
<script src="did_ecuador_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="did_ecuador_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="did_ecuador_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="did_ecuador_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="did_ecuador_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Fernando Rios-Avila">
  <meta name="dcterms.date" content="2021-10-13">
  <title>From 2x2 to GxT DID</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="did_ecuador_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="did_ecuador_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="did_ecuador_files/libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="styles.css">
  <link href="did_ecuador_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="did_ecuador_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="did_ecuador_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="did_ecuador_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
  <script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">From 2x2 to GxT DID</h1>
  <p class="subtitle">Advances, Problems and Solutions</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Fernando Rios-Avila 
</div>
        <p class="quarto-title-affiliation">
            Levy Economics Institute of Bard College
          </p>
    </div>
</div>

  <p class="date">2021-10-13</p>
</section>
<section id="why-differences-in-diffences" class="slide level2">
<h2>Why differences in diffences?</h2>
<ul>
<li><p>Differences-in-Differences (DID) is one of the most popular tools in applied economics for analyzing causal effects of an intervention or policy treatment.</p></li>
<li><p>Under reasonable assumptions, DID allows you to identify these effects by comparing changes in the treatment group with changes in the control group.</p>
<ul>
<li>This method of identification even allows for controlling for self-selection in the treatment.</li>
</ul></li>
<li><p>In recent years, several advances in DID have been developed, revealing issues with the traditional DID design, particularly with the application of TWFE.</p></li>
<li><p>In this course, I will briefly present the problems and solutions that have been proposed, and how they are implemented in <code>Stata</code>.</p></li>
<li><p>So lets Start with the basics: 2x2 DID</p></li>
</ul>
</section>
<section id="x2-did-cannonic-design" class="slide level2">
<h2>2x2 DID: Cannonic Design</h2>
<ul>
<li>In the 2x2 DID design, we have 2 groups:
<ul>
<li>Control (<span class="math inline">\(D=1\)</span>) y treated (<span class="math inline">\(D=0\)</span>),</li>
</ul></li>
<li>Which are observed for two periods of time:
<ul>
<li>Before (<span class="math inline">\(T=0\)</span>) and after (<span class="math inline">\(T=1\)</span>) the treatment.</li>
</ul></li>
<li>For all groups and periods of time, we observe the <em>realized</em> outcome <span class="math inline">\(Y\)</span>, but cannot observe all <em>potential</em> outcomes.</li>
<li>This setup is valid both for panel data and repeat cross-sections, but will focus on panel data.</li>
</ul>
</section>
<section id="potential-outcomes-and-treatment-effects" class="slide level2">
<h2>Potential outcomes and Treatment Effects</h2>
<ul>
<li><p><strong>Potential outcomes</strong> are the outcomes we would observe for each observation in the data if it were assigned to either the treatement or control group.</p>
<ul>
<li><span class="math inline">\(Y_{i,t}(D=0)\)</span>: Potential outcome for individual <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span> if he was never treated.</li>
<li><span class="math inline">\(Y_{j,s}(D=1)\)</span>: Potential outcome for individual <span class="math inline">\(j\)</span> at time <span class="math inline">\(s\)</span> if he was treated.</li>
</ul></li>
<li><p>However, we are only able to observe one of this outcomes: <span class="math display">\[Y_{i,t} = Y_{i,t}(1)D_i + Y_{i,t}(0)(1-D_i)\]</span></p></li>
<li><p>Where <span class="math inline">\(D_i\)</span> is a dummy indicates the effective treatment status of individual <span class="math inline">\(i\)</span>.</p></li>
<li><p>Now, we are interested in Treatment Effects for <span class="math inline">\(i\)</span>, or any summary measures, after the treatment is applied:</p></li>
</ul>
<p><span class="math display">\[TE = Y_{i,1}(1)-Y_{i,1}(0) \text{ or } ATT =E(Y_{i,1}(1)-Y_{i,1}(0)|D=1)\]</span></p>
</section>
<section id="the-did-estimator-assumptions" class="slide level2">
<h2>The DID Estimator: Assumptions</h2>
<ul>
<li>Because we can’t observe both potential outcomes, we need to make assumptions to identify the treatment effect.</li>
</ul>
<ol type="1">
<li><p><strong>Stable Unit Treatment Value Assumption (SUTVA)</strong>: The treatment status of one unit does not affect the potential outcomes of other units. (No spillovers)</p></li>
<li><p><strong>Parallel Trends</strong>: In the absence of treatment, in average, both groups would have followed the same trend (changes) over time.</p></li>
</ol>
<p><span class="math display">\[\color{blue}{E(Y_{i,1}(0) - Y_{i,0}(0)|D_i=1)} = \color{green}{E(Y_{i,1}(0)-Y_{i,0}(0)|D_i=0)}\]</span></p>
<ol start="3" type="1">
<li><strong>No Anticipation</strong>: Before the treatment takes place (<span class="math inline">\(T=0\)</span>), the potential outcomes do not depend on the treatment status.</li>
</ol>
<p><span class="math display">\[Y_{i,0}(0) = Y_{i,0}(1)\]</span></p>
</section>
<section id="the-did-estimator" class="slide level2">
<h2>The DID Estimator</h2>
<ul>
<li><p>Lets take a second look at the ATT definition: <span class="math display">\[\begin{aligned}
ATT &amp;=E(Y_{i,1}(1)|D=1)-\color{red}{E(Y_{i,1}(0)|D=1)} \\
&amp;=E(Y_{i,1}|D=1)-\color{red}{E(Y_{i,1}(0)|D=1)}
\end{aligned}
\]</span></p></li>
<li><p>The problem is to estimate the <strong>red</strong> component, to obtain an estimator for the ATT.</p></li>
<li><p>However, under the PTA and No Anticipation, the observed part can be written as: <span class="math display">\[E(Y_{i,1}(0)|D=1) = E(Y_{i,1}-Y_{i,0}|D=0) + E(Y_{i,0}|D=1)
\]</span></p></li>
<li><p>Which gives the usual ATT estimator:</p></li>
</ul>
<p><span class="math display">\[ATT =\underbrace{E(Y_{i,1} - Y_{i,0}|D=1)}_{\Delta treat} - \underbrace{E(Y_{i,1}-Y_{i,0}|D=0)}_{\Delta control}\]</span></p>
</section>
<section id="graphically" class="slide level2">
<h2>Graphically</h2>
<div class="cell" data-execution_count="1">
<div class="cell-output cell-output-display">
<style>div.jp-Notebook .datagrid-container {min-height: 448px; }</style>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>graph size was (5.5in, 4in), is now (default, default).</code></pre>
</div>
</div>

<img data-src="did_ecuador_files/figure-revealjs/cell-3-output-2.png" class="r-stretch quarto-figure-center"></section>
<section id="how-to-estimate-it" class="slide level2">
<h2>How to estimate it?</h2>
<ul>
<li><strong>Difference-in-Means</strong>:</li>
</ul>
<p><span class="math display">\[\widehat{ATT}=\bar Y^{D=1,T=1} - \bar Y^{D=1,T=0} - [ \bar Y^{D=0,T=1} - \bar Y^{D=0,T=0} ]\]</span></p>
<ul>
<li><strong>Regression</strong>:</li>
</ul>
<p><span class="math display">\[Y_{i,t} = \beta_0 + \beta_1 D_i + \beta_2 t + \beta_3 (D_i \times t) + \epsilon_{i,t}\]</span></p>
<ul>
<li>With Panel Data: <strong>Fixed Effects</strong></li>
</ul>
<p><span class="math display">\[\begin{aligned}
Y_{i,t} &amp;= \beta_0 + \sum \delta_i  + \beta_2 t + \beta_3 (D_i \times t) + \epsilon_{i,t} \\
\Delta Y_{i} &amp;= \beta_2 + \beta_3 D_i + \epsilon_{i} \text{ for } t=0 \\
\end{aligned}
\]</span></p>
</section>
<section id="extension-adding-controls" class="slide level2">
<h2>Extension: Adding Controls</h2>
<ul>
<li>The DID estimator presented above relies on Unconditional Parallel Trends. It may work if both control and treated groups are similar in all aspects, except for the treatment. But they may not.</li>
<li>In this case, we can add controls to the model, to account for differences in the groups.</li>
</ul>
<p><span class="math display">\[Y_{i,t} = \beta_0 + \beta_1 D_i + \beta_2 t + \beta_3 (D_i \times t) +  X_{it} \gamma + \epsilon_{i,t}\]</span></p>
<ul>
<li>But this would be wrong. Why?</li>
</ul>
</section>
<section id="problems-of-adding-controls" class="slide level2">
<h2>Problems of Adding Controls</h2>
<ul>
<li>Simply adding controls imposes assumption of homogenous treatement effects. As described in <span class="citation" data-cites="santanna_doubly_2020">Sant’Anna and Zhao (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2020</a>)</span>, <span class="math inline">\(\gamma\)</span> may not be the same as the ATT.
<ul>
<li>Solution: Interactions between controls and all group\time dummies: <span class="math display">\[y_{i,t} = \beta_0 + \sum \delta_i  + \beta_2 t + \beta_3 (D_i \times t) +  X_{it} \gamma + \sum \gamma_x (X-\bar X_{D\times T})*D*T + \epsilon_{i,t}\]</span></li>
</ul></li>
<li>Controlling for time varying variables may introduce biases (bad controls)
<ul>
<li>Solution: use only pre-treatment variables as controls. (panel) or variables that should not be affected by the treatment (cross-sections)</li>
<li>Also: If using Panel Data, one can add as controls all variables history. (see for example <span class="citation" data-cites="caetano_difference_2022">Caetano and Callaway (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2022</a>)</span>)</li>
</ul></li>
</ul>
</section>
<section id="potential-solution-santanna_doubly_2020" class="slide level2">
<h2>Potential Solution: <span class="citation" data-cites="santanna_doubly_2020">Sant’Anna and Zhao (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2020</a>)</span></h2>
<ul>
<li><p>DID is a straighforward estimator, that relies strongly on the Unconditional Parallel Trends Assumption. (UPTA)</p></li>
<li><p>One solution to the problem is to use the <strong>Conditional Parallel Trends Assumption</strong> (CPTA), which can be less restrictive.</p></li>
<li><p>This states that PTA holds, only after conditioning on a set of variables <span class="math inline">\(X\)</span>. (looking at subgroups).</p></li>
</ul>
<p><span class="math display">\[\color{blue}{E(Y_{i,1}(0) - Y_{i,0}(0)|D_i=1,X)} = \color{green}{E(Y_{i,1}(0)-Y_{i,0}(0)|D_i=0,X)}\]</span></p>
<ul>
<li>So, if you can “control” for individual characteristics, you could estimate the treatment effect, and still report Average Treatment Effects for the population.</li>
</ul>
<p><span class="math display">\[ATT = E\big[ [E(Y_{i,1}(0) - Y_{i,0}(0)|D_i=1,X ] \big]\]</span></p>
</section>
<section id="added-assumption" class="slide level2">
<h2>Added Assumption</h2>
<ul>
<li><p>When accouting for covariates, one needs to add an additional assumption to the data:</p></li>
<li><p>There is an overlap in the distribution of <span class="math inline">\(X\)</span> between the treated and control groups. (common support)</p></li>
</ul>
<p><span class="math display">\[0 &lt;&lt; Pr(D=1|X) &lt;&lt; 1\]</span></p>
<ul>
<li>This is important, because if there is no overlap, the treatment effect cannot be identified for all groups, and may create distorted estimates.</li>
</ul>
</section>
<section id="potential-solution-drdid-teffects" class="slide level2">
<h2>Potential Solution: <code>drdid</code>, <code>teffects</code></h2>
<ul>
<li><span class="citation" data-cites="santanna_doubly_2020">Sant’Anna and Zhao (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2020</a>)</span> propose various alternatives to estimate the treatment effect with controls, under CPTA. They contrast the implementation of methods that use linear regressions, Inverse Probability Weighting (IPW) and Doubly Robust Estimators (DR).</li>
<li>Similar estimates could be obtained using <code>teffects</code> in Stata.</li>
<li>But how does this work? Two Cases:
<ul>
<li>Panel Data: This simplifies the problem, because we can use the Data structure to estimate the model.</li>
<li>Crossection: This is more complicated because requires careful consideration of idenfication assumptions, and groups of interest.</li>
</ul></li>
</ul>
</section>
<section id="panel-data" class="slide level2">
<h2>Panel Data</h2>
<ul>
<li>Step 1: Estimate the changes in the outcome <span class="math inline">\(\Delta Y_i = Y_{i,1} - Y_{i,0}\)</span>. (the First D)
<ul>
<li>Because of this, we are implicitly reducing our sample size: from <span class="math inline">\(N\)</span> to <span class="math inline">\(N/2\)</span> (because of the unestimated fixed effects)</li>
</ul></li>
<li>Step 2: Estimate the treatment effect:
<ul>
<li>Simplest case, no controls: <span class="math display">\[\Delta Y_i = \beta_0 + \beta_1 D_i + \varepsilon_i\]</span></li>
</ul></li>
<li>In other words, the model is now a simple linear regression, with 1 period.</li>
</ul>
</section>
<section id="panel-data-adding-controls" class="slide level2">
<h2>Panel Data: Adding controls</h2>
<ul>
<li>Because you have now only 1 period, and two groups. All treatment effect estimators can be used.
<ul>
<li>regression outcome, IPW, doubly robust, matching, etc.</li>
<li>We use them to estimate the second D of DID</li>
</ul></li>
<li>Empirically: With Transformed data (<span class="math inline">\(\Delta y\)</span>) as dependent variable, any of the methods in <code>teffects</code> can be used to estimate the treatment effect.</li>
<li>With untransformed data (RC), you can use <code>drdid</code> to estimate the treatment effect, and their Standard errors.
<ul>
<li>You need to make sure you have only 2 periods of data.</li>
</ul></li>
</ul>
</section>
<section id="panel-data-methods" class="slide level2">
<h2>Panel Data: Methods</h2>
<ul>
<li><strong>Regression</strong>: reg (<code>drdid</code>) or ra (<code>teffects</code>)
<ul>
<li>using <span class="math inline">\(\Delta y\)</span> as dependent variable, estimate a linear model with covariates (No FE) for the untreated, and predict outcomes. This would become your “Potential outcome change under no-treatment”</li>
</ul></li>
</ul>
<p><span class="math display">\[ ATT = E(\Delta Y_{i}|D=1) - E({\hat\gamma X|D=1})\]</span></p>
<ul>
<li><strong>Inverse Probability Weighting</strong>: stdipw (<code>drdid</code>) or ipw (<code>teffects</code>)
<ul>
<li>Estimate the likelihood of being treated, and use it to identify a propensity score and IPW weights <span class="math inline">\(p(D=1|X) = \hat p(X)\)</span></li>
</ul></li>
</ul>
<p><span class="math display">\[ ATT = E(\Delta Y_{i}|D=1) - E\left({\Delta Y_{i} \frac{p(X)}{1-p(X)}|D=0}\right)\]</span></p>
</section>
<section id="panel-data-methods-1" class="slide level2">
<h2>Panel Data: Methods</h2>
<ul>
<li><strong>Doubly Robust Estimation</strong>: dript and dripw (<code>drdid</code>) or ipwra aipw (<code>teffects</code>)
<ul>
<li>Estimate the likelihood of being treated, and use it to identify a propensity score and IPW weights <span class="math inline">\(p(D=1|X) = \hat p(X)\)</span></li>
<li>Estimate a weighted regression with <span class="math inline">\(\Delta y\)</span> as dependent variable or estimate a weighted regression correction. (see <a href="https://friosavila.github.io/app_metrics/app_metrics2.html">here</a> slide 17-18) for more details.</li>
<li>Combinations of modeling outcome and modeling likelihood and pscores makes the estimator doubly robust.</li>
</ul></li>
<li>For Repeated crossection, the math becomes more complicated to follow and identify the “group of interest”<br>
</li>
<li>See <a href="https://friosavila.github.io/app_metrics/app_metrics2.html">here</a> slide 53-54 for more details.</li>
</ul>
</section>
<section id="example" class="slide level2 scrollable">
<h2>Example</h2>
<p>Some Data Preparation</p>
<div class="cell larger" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">qui</span>:frause lalonde, <span class="kw">clear</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw">keep</span>  <span class="kw">if</span> treated==0 | <span class="kw">sample</span>==2</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="kw">bysort</span> id (<span class="fu">year</span>):<span class="kw">gen</span> dy = re[2]-re[1]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(5,574 observations deleted)</code></pre>
</div>
</div>
<p>Using <code>teffects</code>:</p>
<div class="cell larger" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb5-1"><a href="#cb5-1"></a>teffects ra (dy educ <span class="bn">black</span> married nodegree hisp re74) (experimental) <span class="kw">if</span> <span class="fu">year</span>==1975 , atet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Iteration 0:   EE criterion =  2.891e-23  
Iteration 1:   EE criterion =  6.094e-26  

Treatment-effects estimation                    Number of obs     =     16,417
Estimator      : regression adjustment
Outcome model  : linear
Treatment model: none
------------------------------------------------------------------------------
             |               Robust
          dy | Coefficient  std. err.      z    P&gt;|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
ATET         |
experimental |
   (1 vs 0)  |  -1055.483   346.1459    -3.05   0.002    -1733.917   -377.0497
-------------+----------------------------------------------------------------
POmean       |
experimental |
          0  |   3118.849   185.0719    16.85   0.000     2756.114    3481.583
------------------------------------------------------------------------------</code></pre>
</div>
</div>
<p>Using <code>drdid</code>:</p>
<div class="cell larger" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb7-1"><a href="#cb7-1"></a>drdid re educ <span class="bn">black</span> married nodegree hisp re74 , ivar(id) time(<span class="fu">year</span>) tr(experimental) <span class="kw">reg</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Doubly robust difference-in-differences                 Number of obs = 32,834
Outcome model  : regression adjustment
Treatment model: none
------------------------------------------------------------------------------
             | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
ATET         |
experimental |
   (1 vs 0)  |  -1055.483   346.1451    -3.05   0.002    -1733.915   -377.0511
------------------------------------------------------------------------------</code></pre>
</div>
</div>
<p>by hand:</p>
<div class="cell larger" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource stata number-lines code-with-copy"><code class="sourceCode stata"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">qui</span>:<span class="kw">reg</span> dy educ <span class="bn">black</span> married nodegree hisp re74 <span class="kw">if</span> exper==0</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="kw">predict</span> dy_hat, <span class="kw">xb</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="kw">gen</span> att_i = dy-dy_hat</span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="kw">tabstat</span> att_i, <span class="kw">by</span>(exper) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Summary for variables: att_i
Group variable: experimental 

experimental |      Mean
-------------+----------
           0 | -9.61e-06
           1 | -1055.483
-------------+----------
       Total | -27.32414
------------------------</code></pre>
</div>
</div>
</section>
<section id="highlights-i-identification" class="slide level2">
<h2>Highlights I: Identification</h2>
<ul>
<li>The identification relies on the non-anticipation assumption and the parallel trends assumption.
<ul>
<li>Neither of these assumptions can be tested, but they can be supported by the data.</li>
</ul></li>
<li>For Implementation, If one has panel data, <code>teffects</code> and <code>drdid</code> can be used to estimate the treatment effect, and their standard errors. (after preparing the data)</li>
<li>Otherwise, <code>drdid</code> can be used for repeated crossection as well. (or GMM)</li>
</ul>
</section>
<section id="highlighs-ii-overlapping" class="slide level2">
<h2>Highlighs II: Overlapping</h2>
<ul>
<li>The <strong>overlapping</strong> assumption is important, and has different implications for the different methods.</li>
<li>When the estimation method is <code>reg</code> or <code>ra</code>, the overlapping assumption is less biding, because the model is extrapolates to created “potential outcomes” for the treated group.
<ul>
<li>However, extrapolation may not be accurate, or create incorrect extrapolations (base category dummies)</li>
</ul></li>
<li>With doubly robust methods, the overlapping assumption is more relevant. <code>dript</code> is particularly sensitive to this assumption, and may not even converge if there is weak overlap.</li>
<li>For most practical purposes, <code>dripw</code> may be the most stable, and preferred method.</li>
</ul>
</section>
<section id="highlighs-iii-controls" class="slide level2">
<h2>Highlighs III: Controls</h2>
<ul>
<li>With panel data, <code>drdid</code> automatically constrains model specification to use pre-treatment information only.
<ul>
<li>Added work is required to include post-treatment information.</li>
</ul></li>
<li>With Repeated crossection, <code>drdid</code> would use both pre-treatment and post-treatment information.</li>
</ul>
</section>
<section>
<section id="from-2x2-to-gxt-did" class="title-slide slide level1 center">
<h1>From 2x2 to GxT DID</h1>

</section>
<section id="how-gxt-did-was-suppoused-to-work" class="slide level2">
<h2>How GxT DID was suppoused to work</h2>
<ul>
<li><p>First: Although restrictive, one common assumption for most models that deal with this design assume treatment is an absorbing state. (once treated, always treated).</p></li>
<li><p>While the 2x2 DID design is simple to understand, it does not reflect the type of information that is available in most cases. (G&gt;2 and T&gt;2)</p></li>
<li><p>Until few years ago, when this kind of data was available, the standard approach was to use a generalized DID design, which extended the use of Fixed Effects:</p></li>
</ul>
<p><span class="math display">\[
\begin{aligned}
2\times2: Y_{i,t} &amp;= \beta_0 + \beta_1 T  + \beta_2 D_i + \beta_3 (D_i \times T) + \epsilon_{i,t} \\
G\times T: Y_{i,t} &amp;= \sum \gamma_t + \sum \delta_i  + \theta^{fe} PT_{i,t} + \epsilon_{i,t} \\
\end{aligned}
\]</span></p>
<p>where <span class="math inline">\(PT_{i,t}\)</span> assume the value of 1 for the treated group After the treatment is applied, and 0 otherwise, and <span class="math inline">\(\theta^{fe}\)</span> representing the treatment effect.</p>
<ul>
<li>Little that we know that this approach only works if the treatment effect is homogeneous across all groups and periods.</li>
</ul>
</section>
<section id="why-it-doesnt-work" class="slide level2">
<h2>Why it doesn’t work?</h2>
<p>There are at least two-ways that have been used to explain why the Standard TWFE does not work:</p>
<ul>
<li><p><strong>The “Bad Controls” Problem</strong>: <span class="citation" data-cites="goodmanbacon2021">Goodman-Bacon (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2021</a>)</span> shows that the TWFE estimator for ATT is a kind of weighted average of all possible DID one could estimate. Some of these would not be <strong>good</strong> DID designs.</p></li>
<li><p><strong>Negative Weights</strong>: <span class="citation" data-cites="dechaisemartin2020">Chaisemartin and D’Haultfœuille (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2020</a>)</span> and <span class="citation" data-cites="borusyak2023revisiting">Borusyak, Jaravel, and Spiess (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2023</a>)</span> show that because TWFE ATT estimator is a weighted average of all group-Specific ATT, some may include negative weights.</p>
<p>This may produce negative ATT even if all group-specific ATT are positive.</p></li>
<li><p>However, when the treatment effect is homogeneous, Neither of these situations would be a problem.</p></li>
</ul>
</section>
<section id="the-bad-controls-problem" class="slide level2">
<h2>The “Bad Controls” Problem</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">All Cases</a></li><li><a href="#tabset-1-2">Early Treated vs Later Treated (Good)</a></li><li><a href="#tabset-1-3">Early Treated vs Later Treated (bad)</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p><img data-src="fig1.png" style="height:50.0%"></p>
</div>
<div id="tabset-1-2">
<p><img data-src="fig2.png"></p>
</div>
<div id="tabset-1-3">
<p><img data-src="fig3.png"></p>
</div>
</div>
</div>
</section>
<section id="the-bad-controls-problem-1" class="slide level2">
<h2>The “Bad Controls” Problem</h2>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">All Cases</a></li><li><a href="#tabset-2-2">Early Treated vs Later Treated (Good)</a></li><li><a href="#tabset-2-3">Early Treated vs Later Treated (bad)</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<p><img data-src="fig1b.png"></p>
</div>
<div id="tabset-2-2">
<p><img data-src="fig2b.png"></p>
</div>
<div id="tabset-2-3">
<p><img data-src="fig3b.png"></p>
</div>
</div>
</div>
</section>
<section id="negative-weights" class="slide level2">
<h2>Negative Weights</h2>
<ul>
<li>To understand the idea of Negative Weights, lets consider the following example:</li>
</ul>
<p><span class="math display">\[Y_{i,t} = \sum \delta_i + \sum \gamma_t  + \theta PT + \epsilon_{i,t}\]</span></p>
<p>If the panel data is balanced, and we apply FWL, we can use partialling out the Fixed Effects:</p>
<p><span class="math display">\[\widetilde{PT}_{it}=PT_{it}-\overline{PT}_{i}-\overline{PT}_{t}+\overline{PT}\]</span></p>
<p>and estimate <span class="math inline">\(\theta^{fe}\)</span> as:</p>
<p><span class="math display">\[\hat\theta^{fe} = \frac{\sum \widetilde{PT_{it}} Y_{it}}{\sum \widetilde{PT}_{it}^2}
= w_{it} Y_{it}
\]</span></p>
</section>
<section id="section" class="slide level2">
<h2></h2>
<p><span class="math display">\[\widetilde{PT}_{it}=PT_{it}-\overline{PT}_{i}-\overline{PT}_{t}+\overline{PT}\]</span></p>
<ul>
<li><span class="math inline">\(\overline{PT}_{i}\)</span> is the share of periods a unit is observed to be treated. (larger for early treated)</li>
<li><span class="math inline">\(\overline{PT}_{t}\)</span> is the share of units treated at time <span class="math inline">\(t\)</span>. (increasing)</li>
<li><span class="math inline">\(\overline{PT}\)</span> Share of treated “unit-periods”</li>
</ul>
<p>Thus, - Units that are treated early, (high <span class="math inline">\(\overline{PT}_{i}\)</span>) - but are analyzed at later periods (<span class="math inline">\(\overline{PT}_{t}\)</span> increasing in <span class="math inline">\(t\)</span>)</p>
<p>Will be more likely to have a negative weight <span class="math inline">\(w_{it}\)</span>, thus contaminating the ATT estimate.</p>
</section>
<section id="graphically-1" class="slide level2">
<h2>Graphically</h2>
<div class="cell" data-execution_count="9">
<div class="cell-output cell-output-stdout">
<pre><code>Number of observations (_N) was 0, now 100.
(900 observations created)
(MWFE estimator converged in 2 iterations)

HDFE Linear regression                            Number of obs   =      1,000
Absorbing 2 HDFE groups                           F(   0,    891) =          .
                                                  Prob &gt; F        =          .
                                                  R-squared       =     0.6663
                                                  Adj R-squared   =     0.6258
                                                  Within R-sq.    =     0.0000
                                                  Root MSE        =     0.3019

------------------------------------------------------------------------------
         trt | Coefficient  Std. err.      t    P&gt;|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       _cons |       .582   .0095454    60.97   0.000     .5632658    .6007342
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
          id |       100           0         100     |
           t |        10           1           9     |
-----------------------------------------------------+</code></pre>
</div>

</div>
<img data-src="did_ecuador_files/figure-revealjs/cell-10-output-2.png" class="r-stretch quarto-figure-center"></section>
<section id="summarizing-the-problem" class="slide level2">
<h2>Summarizing the Problem</h2>
<ul>
<li>Both Negative Weights and Bad Controls are capturing the same problem.</li>
</ul>
<ol type="1">
<li><p>By using already treated units as controls (bad controls), we are implicitly applying negative weights to units that are already treated.</p></li>
<li><p>This would not be a problem on its own, if the treatment effect is homogeneous across all groups and periods.</p></li>
<li><p>However, if the treatment effect is heterogeneous, Parallel Trends between already treated and late treated units may not hold.</p></li>
</ol>
</section></section>
<section>
<section id="solutions" class="title-slide slide level1 center">
<h1>Solutions</h1>

</section>
<section id="general-overview" class="slide level2">
<h2>General Overview</h2>
<p>The root of the problem with TWFE:</p>
<blockquote>
<p>If treatment effects are heterogenous, the TWFE estimator of treatment effects produces incorrect estimates because of “negative weights” or “bad controls”</p>
</blockquote>
<p>To solve the problem we need to do one of three things:</p>
<ol type="1">
<li>Avoid using bad controls (<span class="citation" data-cites="borusyak2023revisiting">Borusyak, Jaravel, and Spiess (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2023</a>)</span> and <span class="citation" data-cites="gardner2022twostage">Gardner (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2022</a>)</span>)</li>
<li>Allow for heterogeneity in the treatment effect. (<span class="citation" data-cites="wooldridge_2021">Jeffrey M. Wooldridge (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2021</a>)</span> and <span class="citation" data-cites="sun_estimating_2021">Sun and Abraham (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2021</a>)</span>)</li>
<li>Use <em>only</em> good DID designs. (<span class="citation" data-cites="callaway_2021">Callaway and Sant’Anna (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2021</a>)</span>)</li>
</ol>
</section>
<section id="avoid-using-bad-controls-did_imputation-and-did2s" class="slide level2">
<h2>Avoid using bad controls: <code>did_imputation</code> and <code>did2s</code></h2>
<h4 id="borusyak2023revisiting-and-gardner2022twostage"><span class="citation" data-cites="borusyak2023revisiting">Borusyak, Jaravel, and Spiess (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2023</a>)</span> and <span class="citation" data-cites="gardner2022twostage">Gardner (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2022</a>)</span></h4>
<ul>
<li><p>These authors propose methodologies that have different implementations, but are very similar in spirit.</p></li>
<li><p>Both methods are based on the idea of “imputing” the missing potential outcomes for the treated group, using a method similar to the one used for 2x2 DID.</p></li>
</ul>
<ol type="1">
<li>Use a combination of never and not-yet treated units model the outcomes as function of caracteristics.</li>
</ol>
<p><span class="math display">\[y_{it} = \delta_i + \gamma_t + \beta X_{it} + \epsilon_{it} \text{ if } D_{it}=0\]</span></p>
<ol start="2" type="1">
<li>Predictions from this model would represent the “potential outcomes” for non-treatment:</li>
</ol>
<p><span class="math display">\[\hat y_{it}^{D=0} \simeq y_{it}(0)\]</span></p>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<ol start="3" type="1">
<li>Use those predictions to estimate treatment effects for every individual:</li>
</ol>
<p><span class="math display">\[\widehat {TE}_i = y_{it}(1) - \hat y_{it}^{D=0}\]</span></p>
<ol start="4" type="1">
<li>For Statistical inference, using a single observation is not enough. However, Statistical inference is possible for some Aggregation of the individual Estimated TE.</li>
</ol>
<p><span class="math display">\[\widehat{ ATT} = E(\widehat {TE}_i|Z) = E(y_{it}(1)-\hat y_{it}^{D=0}|Z)\]</span></p>
<p>where <span class="math inline">\(Z\)</span> can be any arbitrary restrictions on the averages.</p>
</section>
<section id="assumptions" class="slide level2">
<h2>Assumptions</h2>
<ul>
<li><p>The identification of TE using the imputation method relies on the same assumptions as the traditional DID design.</p></li>
<li><p>However, It also requires an additional assumption:</p>
<ul>
<li>PTA holds for all pre- and post-treatment periods.</li>
</ul></li>
<li><p>This why how we can use pre-treatment information to predict the potential outcomes for the treated group.</p></li>
<li><p>This also means that the method is sensitive to problems with <strong>long</strong> PTA. Although it can be relaxed.</p></li>
</ul>
</section>
<section id="implementation" class="slide level2">
<h2>Implementation</h2>
<ul>
<li>There are two implementations of the method in Stata: <code>did_imputation</code> and <code>did2s</code>. In addition to the original GMM estimator described in <span class="citation" data-cites="gardner2022twostage">Gardner (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2022</a>)</span></li>
</ul>
</section>
<section id="allow-for-heterogeneity-jwdid-and-eventstudyinteract" class="slide level2">
<h2>Allow for Heterogeneity: <code>jwdid</code> and <code>eventstudyinteract</code></h2>
<h4 id="wooldridge_2021-and-sun_estimating_2021"><span class="citation" data-cites="wooldridge_2021">Jeffrey M. Wooldridge (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2021</a>)</span> and <span class="citation" data-cites="sun_estimating_2021">Sun and Abraham (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2021</a>)</span></h4>
</section>
<section id="using-good-did-designs-csdid-and-csdid2" class="slide level2">
<h2>Using Good DID Designs: <code>csdid</code> and <code>csdid2</code></h2>
<h4 id="callaway_2021"><span class="citation" data-cites="callaway_2021">Callaway and Sant’Anna (<a href="#/suggested-readings" role="doc-biblioref" onclick="">2021</a>)</span></h4>
</section>
<section id="map-how-they-relate" class="slide level2">
<h2>Map: How they Relate</h2>
</section>
<section id="suggested-readings" class="slide level2 smaller scrollable">
<h2>Suggested readings</h2>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-borusyak2023revisiting" class="csl-entry" role="listitem">
Borusyak, Kirill, Xavier Jaravel, and Jann Spiess. 2023. <span>“Revisiting Event Study Designs: Robust and Efficient Estimation.”</span> <a href="https://arxiv.org/abs/2108.12419">https://arxiv.org/abs/2108.12419</a>.
</div>
<div id="ref-caetano_difference_2022" class="csl-entry" role="listitem">
Caetano, Carolina, and Brantly Callaway. 2022. <span>“Difference-in-<span>Differences</span> with <span>Time</span>-<span>Varying</span> <span>Covariates</span> in the <span>Parallel</span> <span>Trends</span> <span>Assumption</span>.”</span> <a href="https://doi.org/10.48550/ARXIV.2202.02903">https://doi.org/10.48550/ARXIV.2202.02903</a>.
</div>
<div id="ref-callaway_2021" class="csl-entry" role="listitem">
Callaway, Brantly, and Pedro H. C. Sant’Anna. 2021. <span>“Difference-in-<span>Differences</span> with Multiple Time Periods.”</span> <em>Journal of Econometrics</em>, Themed <span>Issue</span>: <span>Treatment</span> <span>Effect</span> 1, 225 (2): 200–230. <a href="https://doi.org/10.1016/j.jeconom.2020.12.001">https://doi.org/10.1016/j.jeconom.2020.12.001</a>.
</div>
<div id="ref-dechaisemartin2020" class="csl-entry" role="listitem">
Chaisemartin, Clément de, and Xavier D’Haultfœuille. 2020. <span>“Two-Way Fixed Effects Estimators with Heterogeneous Treatment Effects.”</span> <em>American Economic Review</em> 110 (9): 2964–96. <a href="https://doi.org/10.1257/aer.20181169">https://doi.org/10.1257/aer.20181169</a>.
</div>
<div id="ref-dechaisemartin_two-way_2023" class="csl-entry" role="listitem">
———. 2023. <span>“Two-Way Fixed Effects and Differences-in-Differences with Heterogeneous Treatment Effects: A Survey.”</span> <em>The Econometrics Journal</em> 26 (3): C1–30. <a href="https://doi.org/10.1093/ectj/utac017">https://doi.org/10.1093/ectj/utac017</a>.
</div>
<div id="ref-gardner2022twostage" class="csl-entry" role="listitem">
Gardner, John. 2022. <span>“Two-Stage Differences in Differences.”</span> <a href="https://arxiv.org/abs/2207.05943">https://arxiv.org/abs/2207.05943</a>.
</div>
<div id="ref-goodmanbacon2021" class="csl-entry" role="listitem">
Goodman-Bacon, Andrew. 2021. <span>“Difference-in-Differences with Variation in Treatment Timing.”</span> <em>Journal of Econometrics</em> 225 (2): 254–77. https://doi.org/<a href="https://doi.org/10.1016/j.jeconom.2021.03.014">https://doi.org/10.1016/j.jeconom.2021.03.014</a>.
</div>
<div id="ref-roth_whats_2023" class="csl-entry" role="listitem">
Roth, Jonathan, Pedro H. C. Sant’Anna, Alyssa Bilinski, and John Poe. 2023. <span>“What’s Trending in Difference-in-Differences? <span>A</span> Synthesis of the Recent Econometrics Literature.”</span> <em>Journal of Econometrics</em> 235 (2): 2218–44. <a href="https://doi.org/10.1016/j.jeconom.2023.03.008">https://doi.org/10.1016/j.jeconom.2023.03.008</a>.
</div>
<div id="ref-santanna_doubly_2020" class="csl-entry" role="listitem">
Sant’Anna, Pedro H. C., and Jun Zhao. 2020. <span>“Doubly Robust Difference-in-Differences Estimators.”</span> <em>Journal of Econometrics</em> 219 (1): 101–22. <a href="https://doi.org/10.1016/j.jeconom.2020.06.003">https://doi.org/10.1016/j.jeconom.2020.06.003</a>.
</div>
<div id="ref-sun_estimating_2021" class="csl-entry" role="listitem">
Sun, Liyang, and Sarah Abraham. 2021. <span>“Estimating Dynamic Treatment Effects in Event Studies with Heterogeneous Treatment Effects.”</span> <em>Journal of Econometrics</em>, Themed <span>Issue</span>: <span>Treatment</span> <span>Effect</span> 1, 225 (2): 175–99. <a href="https://doi.org/10.1016/j.jeconom.2020.09.006">https://doi.org/10.1016/j.jeconom.2020.09.006</a>.
</div>
<div id="ref-wooldridge_2023" class="csl-entry" role="listitem">
Wooldridge, Jeffrey M. 2023. <span>“Simple Approaches to Nonlinear Difference-in-Differences with Panel Data.”</span> <em>The Econometrics Journal</em> 26 (3): C31–66. <a href="https://doi.org/10.1093/ectj/utad016">https://doi.org/10.1093/ectj/utad016</a>.
</div>
<div id="ref-wooldridge_2021" class="csl-entry" role="listitem">
Wooldridge, Jeffrey M. 2021. <span>“Two-<span>Way</span> <span>Fixed</span> <span>Effects</span>, the <span>Two</span>-<span>Way</span> <span>Mundlak</span> <span>Regression</span>, and <span>Difference</span>-in-<span>Differences</span> <span>Estimators</span>.”</span> <em>SSRN Journal</em>. <a href="https://doi.org/10.2139/ssrn.3906345">https://doi.org/10.2139/ssrn.3906345</a>.
</div>
</div>
<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="did_ecuador_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="did_ecuador_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="did_ecuador_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="did_ecuador_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="did_ecuador_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="did_ecuador_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="did_ecuador_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="did_ecuador_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="did_ecuador_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="did_ecuador_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1700,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>